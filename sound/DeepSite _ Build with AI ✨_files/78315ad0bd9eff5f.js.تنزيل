(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,45042,55297,e=>{"use strict";e.s(["useMount",()=>r],45042),e.s(["default",()=>i],55297);var t=e.i(71645);let i=function(e){(0,t.useEffect)(e,[])},r=function(e){i(function(){e()})}},14272,e=>{"use strict";e.s(["Mutation",()=>f,"getDefaultState",()=>p]);var t,i,r,a,s=e.i(39946),n=e.i(70292),o=e.i(62351),l=e.i(37696),u=e.i(88245),c=e.i(40143),d=e.i(88587),h=e.i(36553),f=(t=new WeakMap,i=new WeakMap,r=new WeakMap,a=new WeakSet,class extends d.Removable{setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){(0,s._)(this,t).includes(e)||((0,s._)(this,t).push(e),this.clearGcTimeout(),(0,s._)(this,i).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){(0,o._)(this,t,(0,s._)(this,t).filter(t=>t!==e)),this.scheduleGc(),(0,s._)(this,i).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){(0,s._)(this,t).length||("pending"===this.state.status?this.scheduleGc():(0,s._)(this,i).remove(this))}continue(){var e,t;return null!=(t=null==(e=(0,s._)(this,r))?void 0:e.continue())?t:this.execute(this.state.variables)}async execute(e){var t,n,u,c,d,f,p,g,m,_,w,b,x,M,O,P,Q,j,C,S,k;let D=()=>{(0,l._)(this,a,y).call(this,{type:"continue"})};(0,o._)(this,r,(0,h.createRetryer)({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(Error("No mutationFn found")),onFail:(e,t)=>{(0,l._)(this,a,y).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{(0,l._)(this,a,y).call(this,{type:"pause"})},onContinue:D,retry:null!=(t=this.options.retry)?t:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>(0,s._)(this,i).canRun(this)}));let q="pending"===this.state.status,E=!(0,s._)(this,r).canStart();try{if(q)D();else{(0,l._)(this,a,y).call(this,{type:"pending",variables:e,isPaused:E}),await (null==(_=(w=(0,s._)(this,i).config).onMutate)?void 0:_.call(w,e,this));let t=await (null==(b=(x=this.options).onMutate)?void 0:b.call(x,e));t!==this.state.context&&(0,l._)(this,a,y).call(this,{type:"pending",context:t,variables:e,isPaused:E})}let t=await (0,s._)(this,r).start();return await (null==(n=(u=(0,s._)(this,i).config).onSuccess)?void 0:n.call(u,t,e,this.state.context,this)),await (null==(c=(d=this.options).onSuccess)?void 0:c.call(d,t,e,this.state.context)),await (null==(f=(p=(0,s._)(this,i).config).onSettled)?void 0:f.call(p,t,null,this.state.variables,this.state.context,this)),await (null==(g=(m=this.options).onSettled)?void 0:g.call(m,t,null,e,this.state.context)),(0,l._)(this,a,y).call(this,{type:"success",data:t}),t}catch(t){try{throw await (null==(M=(O=(0,s._)(this,i).config).onError)?void 0:M.call(O,t,e,this.state.context,this)),await (null==(P=(Q=this.options).onError)?void 0:P.call(Q,t,e,this.state.context)),await (null==(j=(C=(0,s._)(this,i).config).onSettled)?void 0:j.call(C,void 0,t,this.state.variables,this.state.context,this)),await (null==(S=(k=this.options).onSettled)?void 0:S.call(k,void 0,t,e,this.state.context)),t}finally{(0,l._)(this,a,y).call(this,{type:"error",error:t})}}finally{(0,s._)(this,i).runNext(this)}}constructor(e){super(),(0,u._)(this,a),(0,n._)(this,t,{writable:!0,value:void 0}),(0,n._)(this,i,{writable:!0,value:void 0}),(0,n._)(this,r,{writable:!0,value:void 0}),this.mutationId=e.mutationId,(0,o._)(this,i,e.mutationCache),(0,o._)(this,t,[]),this.state=e.state||p(),this.setOptions(e.options),this.scheduleGc()}});function p(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}function y(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),c.notifyManager.batch(()=>{(0,s._)(this,t).forEach(t=>{t.onMutationUpdate(e)}),(0,s._)(this,i).notify({mutation:this,type:"updated",action:e})})}},8149,83436,18224,e=>{"use strict";e.s(["ProProvider",()=>T,"useProModal",()=>R],8149);var t,i,r,a,s,n,o=e.i(43476),l=e.i(71645),u=e.i(59227);e.s(["useEditor",()=>E],18224);var c=e.i(66027),d=e.i(12598),h=e.i(39946),f=e.i(70292),p=e.i(62351),y=e.i(37696),g=e.i(88245),m=e.i(14272),_=e.i(40143),w=e.i(15823),b=e.i(19273),x=(t=new WeakMap,i=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakSet,n=new WeakSet,class extends w.Subscribable{bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var i;let a=this.options;this.options=(0,h._)(this,t).defaultMutationOptions(e),(0,b.shallowEqualObjects)(this.options,a)||(0,h._)(this,t).getMutationCache().notify({type:"observerOptionsUpdated",mutation:(0,h._)(this,r),observer:this}),(null==a?void 0:a.mutationKey)&&this.options.mutationKey&&(0,b.hashKey)(a.mutationKey)!==(0,b.hashKey)(this.options.mutationKey)?this.reset():(null==(i=(0,h._)(this,r))?void 0:i.state.status)==="pending"&&(0,h._)(this,r).setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var e;null==(e=(0,h._)(this,r))||e.removeObserver(this)}}onMutationUpdate(e){(0,y._)(this,s,M).call(this),(0,y._)(this,n,O).call(this,e)}getCurrentResult(){return(0,h._)(this,i)}reset(){var e;null==(e=(0,h._)(this,r))||e.removeObserver(this),(0,p._)(this,r,void 0),(0,y._)(this,s,M).call(this),(0,y._)(this,n,O).call(this)}mutate(e,i){var s;return(0,p._)(this,a,i),null==(s=(0,h._)(this,r))||s.removeObserver(this),(0,p._)(this,r,(0,h._)(this,t).getMutationCache().build((0,h._)(this,t),this.options)),(0,h._)(this,r).addObserver(this),(0,h._)(this,r).execute(e)}constructor(e,o){super(),(0,g._)(this,s),(0,g._)(this,n),(0,f._)(this,t,{writable:!0,value:void 0}),(0,f._)(this,i,{writable:!0,value:void 0}),(0,f._)(this,r,{writable:!0,value:void 0}),(0,f._)(this,a,{writable:!0,value:void 0}),(0,p._)(this,t,e),this.setOptions(o),this.bindMethods(),(0,y._)(this,s,M).call(this)}});function M(){var e,t;let a=null!=(t=null==(e=(0,h._)(this,r))?void 0:e.state)?t:(0,m.getDefaultState)();(0,p._)(this,i,{...a,isPending:"pending"===a.status,isSuccess:"success"===a.status,isError:"error"===a.status,isIdle:"idle"===a.status,mutate:this.mutate,reset:this.reset})}function O(e){_.notifyManager.batch(()=>{if((0,h._)(this,a)&&this.hasListeners()){var t,r,s,n,o,l,u,c;let d=(0,h._)(this,i).variables,f=(0,h._)(this,i).context;(null==e?void 0:e.type)==="success"?(null==(t=(r=(0,h._)(this,a)).onSuccess)||t.call(r,e.data,d,f),null==(s=(n=(0,h._)(this,a)).onSettled)||s.call(n,e.data,null,d,f)):(null==e?void 0:e.type)==="error"&&(null==(o=(l=(0,h._)(this,a)).onError)||o.call(l,e.error,d,f),null==(u=(c=(0,h._)(this,a)).onSettled)||u.call(c,void 0,e.error,d,f))}this.listeners.forEach(e=>{e((0,h._)(this,i))})})}function P(e,t){let i=(0,d.useQueryClient)(t),[r]=l.useState(()=>new x(i,e));l.useEffect(()=>{r.setOptions(e)},[r,e]);let a=l.useSyncExternalStore(l.useCallback(e=>r.subscribe(_.notifyManager.batchCalls(e)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=l.useCallback((e,t)=>{r.mutate(e,t).catch(b.noop)},[r]);if(a.error&&(0,b.shouldThrowError)(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:s,mutateAsync:a.mutate}}var Q=e.i(50898);e.s(["useUpdateEffect",()=>j],83436);let j=function(e,t){var i,r=(i=(0,l.useRef)(!0)).current?(i.current=!1,!0):i.current;(0,l.useEffect)(function(){if(!r)return e()},t)};var C=e.i(46696),S=e.i(18566),k=e.i(37783),D=e.i(54858),q=e.i(29965);let E=(e,t)=>{let i=(0,d.useQueryClient)(),r=(0,S.useRouter)(),[a,,s]=(0,Q.useLocalStorage)("pages"),{data:n,isFetching:o}=(0,c.useQuery)({queryKey:["editor.project"],queryFn:async()=>{try{let{project:i,pages:r,files:a,commits:s}=(await D.api.get("/me/projects/".concat(e,"/").concat(t))).data;return(null==r?void 0:r.length)>0&&h(r),(null==a?void 0:a.length)>0&&g(a),(null==s?void 0:s.length)>0&&_(s),i}catch(e){return C.toast.error(e.response.data.error),r.push("/projects"),null}},retry:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:"always",staleTime:0,gcTime:0,enabled:!!e&&!!t}),{data:u=[]}=(0,c.useQuery)({queryKey:["editor.pages"],queryFn:async()=>[{path:"index.html",html:k.defaultHTML}],refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,retry:!1,initialData:[{path:"index.html",html:k.defaultHTML}]}),h=e=>{if("function"==typeof e){var t;let r=null!=(t=i.getQueryData(["editor.pages"]))?t:[];i.setQueryData(["editor.pages"],e(r))}else i.setQueryData(["editor.pages"],e)},{data:f="index.html"}=(0,c.useQuery)({queryKey:["editor.currentPage"],queryFn:async()=>"index.html",refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1}),{data:p=[]}=(0,c.useQuery)({queryKey:["editor.prompts"],queryFn:async()=>[],refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,retry:!1,initialData:[]}),{data:y=[]}=(0,c.useQuery)({queryKey:["editor.files"],queryFn:async()=>[],refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,retry:!1,initialData:[]}),g=e=>{if("function"==typeof e){var t;let r=null!=(t=i.getQueryData(["editor.files"]))?t:[];i.setQueryData(["editor.files"],e(r))}else i.setQueryData(["editor.files"],e)},{data:m=[]}=(0,c.useQuery)({queryKey:["editor.commits"],queryFn:async()=>[],refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,initialData:[]}),_=e=>{if("function"==typeof e){var t;let r=null!=(t=i.getQueryData(["editor.commits"]))?t:[];i.setQueryData(["editor.commits"],e(r))}else i.setQueryData(["editor.commits"],e)},{data:w="desktop"}=(0,c.useQuery)({queryKey:["editor.device"],queryFn:async()=>"desktop",refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,initialData:"desktop"}),{data:b="chat"}=(0,c.useQuery)({queryKey:["editor.currentTab"],queryFn:async()=>"chat",refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1}),{data:x=null}=(0,c.useQuery)({queryKey:["editor.currentCommit"],queryFn:async()=>null,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1}),M=(0,l.useMemo)(()=>{var e;return null!=(e=u.find(e=>e.path===f))?e:{path:"index.html",html:k.defaultHTML}},[u,f]),O=P({mutationFn:async e=>{let{files:t,project:i}=e,r=Array.from(t).filter(e=>e.type.startsWith("image/")),a=new FormData;r.forEach(e=>{a.append("images",e)});let s=await fetch("/api/me/projects/".concat(i.space_id,"/images"),{method:"POST",body:a});if(!s.ok)throw Error("Upload failed");return s.json()},onSuccess:e=>{g(t=>[...t,...e.uploadedFiles])}}),{data:E=[]}=(0,c.useQuery)({queryKey:["editor.lastSavedPages"],queryFn:async()=>[],refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,initialData:[]}),F=e=>{i.setQueryData(["editor.lastSavedPages"],e)},{data:T=!1}=(0,c.useQuery)({queryKey:["editor.hasUnsavedChanges"],queryFn:async()=>!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1}),R=e=>{i.setQueryData(["editor.hasUnsavedChanges"],e)},W=P({mutationFn:async e=>{let{pages:t,project:i,namespace:r,repoId:a}=e;if(!(null==i?void 0:i.space_id)||!r||!a)throw Error("Project not found or missing parameters");let s=await D.api.put("/me/projects/".concat(r,"/").concat(a,"/save"),{pages:t,commitTitle:"Manual changes saved"});if(!s.data.ok)throw Error(s.data.message||"Failed to save changes");return s.data},onSuccess:e=>{F([...u]),R(!1),e.commit&&_(t=>[e.commit,...t])}}),A=async()=>{if(n&&T&&e&&t)return W.mutateAsync({pages:u,project:n,namespace:e,repoId:t})};j(()=>{n&&u.length>0&&0===E.length&&F([...u])},[n,u]),j(()=>{E.length>0&&0!==u.length&&0!==E.length&&R(JSON.stringify(u)!==JSON.stringify(E))},[u,E]),j(()=>{e&&t&&(R(!1),F([]),i.invalidateQueries({queryKey:["editor.currentCommit"]}),i.invalidateQueries({queryKey:["editor.lastSavedPages"]}),i.invalidateQueries({queryKey:["editor.hasUnsavedChanges"]}))},[e,t]);let K=(0,l.useMemo)(()=>(0,q.isTheSameHtml)(M.html),[u]);return{isLoadingProject:o,project:n,prompts:p,pages:u,setPages:h,setPrompts:e=>{if("function"==typeof e){var t;let r=null!=(t=i.getQueryData(["editor.prompts"]))?t:[];i.setQueryData(["editor.prompts"],e(r))}else i.setQueryData(["editor.prompts"],e)},files:y,setFiles:g,device:w,setDevice:e=>{i.setQueryData(["editor.device"],e)},currentPage:f,setCurrentPage:e=>{i.setQueryData(["editor.currentPage"],e)},currentPageData:M,currentTab:b,setCurrentTab:e=>{i.setQueryData(["editor.currentTab"],e)},uploadFiles:(e,t)=>{e&&t&&O.mutate({files:e,project:t})},commits:m,setCommits:_,currentCommit:x,setCurrentCommit:e=>{i.setQueryData(["editor.currentCommit"],e)},setProject:e=>{let{project:t,pages:r,files:a,commits:s}=e;(null==r?void 0:r.length)>0&&h(r),(null==a?void 0:a.length)>0&&g(a),(null==s?void 0:s.length)>0&&_(s),i.setQueryData(["editor.project"],t)},isSameHtml:K,isUploading:O.isPending,globalEditorLoading:O.isPending||o,hasUnsavedChanges:T,saveChanges:A,isSaving:W.isPending,lastSavedPages:E,setLastSavedPages:F}},F=(0,l.createContext)(void 0);function T(e){let{children:t}=e,[i,r]=(0,l.useState)(!1),{pages:a}=E();return(0,o.jsxs)(F.Provider,{value:{isOpen:i,openProModal:()=>{r(!0)},closeProModal:()=>{r(!1)}},children:[t,(0,o.jsx)(u.ProModal,{open:i,onClose:r,pages:a})]})}function R(){let e=(0,l.useContext)(F);if(void 0===e)throw Error("useProModal must be used within a ProProvider");return e}},43137,e=>{"use strict";e.s(["LoginProvider",()=>c,"useLoginModal",()=>d],43137);var t=e.i(43476),i=e.i(71645),r=e.i(50898),a=e.i(67881),s=e.i(30374),n=e.i(29632),o=e.i(29965);let l=e=>{let{open:i,pages:l,onClose:u,title:c="Log In to use DeepSite for free",description:d="Log In through your Hugging Face account to continue using DeepSite and increase your monthly free limit."}=e,{openLoginWindow:h}=(0,n.useUser)(),[,f]=(0,r.useLocalStorage)("pages"),p=async()=>{l&&!(0,o.isTheSameHtml)(l[0].html)&&f(l),h(),u(!1)};return(0,t.jsx)(s.Dialog,{open:i,onOpenChange:u,children:(0,t.jsxs)(s.DialogContent,{className:"sm:max-w-lg lg:!p-8 !rounded-3xl !bg-white !border-neutral-100",showCloseButton:!1,children:[(0,t.jsx)(s.DialogTitle,{className:"hidden"}),(0,t.jsxs)("main",{className:"flex flex-col items-start text-left relative pt-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-start -space-x-4 mb-5",children:[(0,t.jsx)("div",{className:"size-14 rounded-full bg-pink-200 shadow-2xs flex items-center justify-center text-3xl opacity-50",children:"💪"}),(0,t.jsx)("div",{className:"size-16 rounded-full bg-amber-200 shadow-2xl flex items-center justify-center text-4xl z-2",children:"😎"}),(0,t.jsx)("div",{className:"size-14 rounded-full bg-sky-200 shadow-2xs flex items-center justify-center text-3xl opacity-50",children:"🙌"})]}),(0,t.jsx)("p",{className:"text-2xl font-bold text-neutral-950",children:c}),(0,t.jsx)("p",{className:"text-neutral-500 text-base mt-2 max-w-sm",children:d}),(0,t.jsx)(a.Button,{variant:"black",size:"lg",tabIndex:-1,className:"w-full !text-base !h-11 mt-8",onClick:p,children:"Log In to Continue"})]})]})})},u=(0,i.createContext)(void 0);function c(e){let{children:r}=e,[a,s]=(0,i.useState)(!1),[n,o]=(0,i.useState)({});return(0,t.jsxs)(u.Provider,{value:{isOpen:a,openLoginModal:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(e),s(!0)},closeLoginModal:()=>{s(!1),o({})}},children:[r,(0,t.jsx)(l,{open:a,onClose:s,pages:n.pages,title:n.title,description:n.description})]})}function d(){let e=(0,i.useContext)(u);if(void 0===e)throw Error("useLoginModal must be used within a LoginProvider");return e}},21731,e=>{"use strict";e.s(["useBroadcastChannel",()=>i]);var t=e.i(71645);function i(e,i){let r=(0,t.useMemo)(()=>a(e),[e]),s=(0,t.useRef)(!1);return(0,t.useEffect)(()=>(r.onmessage=e=>i(e.data),()=>{r.close(),s.current=!0}),[]),{postMessage:(0,t.useCallback)(e=>{null==r||r.postMessage(e)},[r])}}let r={},a=e=>(r[e]||(r[e]=new BroadcastChannel(e)),r[e])},8341,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),!function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(i,{cancelIdleCallback:function(){return a},requestIdleCallback:function(){return r}});let r="undefined"!=typeof self&&self.requestIdleCallback&&self.requestIdleCallback.bind(window)||function(e){let t=Date.now();return self.setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)},a="undefined"!=typeof self&&self.cancelIdleCallback&&self.cancelIdleCallback.bind(window)||function(e){return clearTimeout(e)};("function"==typeof i.default||"object"==typeof i.default&&null!==i.default)&&void 0===i.default.__esModule&&(Object.defineProperty(i.default,"__esModule",{value:!0}),Object.assign(i.default,i),t.exports=i.default)},79520,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),!function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(i,{default:function(){return m},handleClientScriptLoad:function(){return p},initScriptLoader:function(){return y}});let r=e.r(55682),a=e.r(90809),s=e.r(43476),n=r._(e.r(74080)),o=a._(e.r(71645)),l=e.r(42732),u=e.r(22737),c=e.r(8341),d=new Map,h=new Set,f=e=>{let{src:t,id:i,onLoad:r=()=>{},onReady:a=null,dangerouslySetInnerHTML:s,children:o="",strategy:l="afterInteractive",onError:c,stylesheets:f}=e,p=i||t;if(p&&h.has(p))return;if(d.has(t)){h.add(p),d.get(t).then(r,c);return}let y=()=>{a&&a(),h.add(p)},g=document.createElement("script"),m=new Promise((e,t)=>{g.addEventListener("load",function(t){e(),r&&r.call(this,t),y()}),g.addEventListener("error",function(e){t(e)})}).catch(function(e){c&&c(e)});s?(g.innerHTML=s.__html||"",y()):o?(g.textContent="string"==typeof o?o:Array.isArray(o)?o.join(""):"",y()):t&&(g.src=t,d.set(t,m)),(0,u.setAttributesFromProps)(g,e),"worker"===l&&g.setAttribute("type","text/partytown"),g.setAttribute("data-nscript",l),f&&(e=>{if(n.default.preinit)return e.forEach(e=>{n.default.preinit(e,{as:"style"})});if("undefined"!=typeof window){let t=document.head;e.forEach(e=>{let i=document.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=e,t.appendChild(i)})}})(f),document.body.appendChild(g)};function p(e){let{strategy:t="afterInteractive"}=e;"lazyOnload"===t?window.addEventListener("load",()=>{(0,c.requestIdleCallback)(()=>f(e))}):f(e)}function y(e){e.forEach(p),[...document.querySelectorAll('[data-nscript="beforeInteractive"]'),...document.querySelectorAll('[data-nscript="beforePageRender"]')].forEach(e=>{let t=e.id||e.getAttribute("src");h.add(t)})}function g(e){let{id:t,src:i="",onLoad:r=()=>{},onReady:a=null,strategy:u="afterInteractive",onError:d,stylesheets:p,...y}=e,{updateScripts:g,scripts:m,getIsSsr:_,appDir:w,nonce:b}=(0,o.useContext)(l.HeadManagerContext);b=y.nonce||b;let x=(0,o.useRef)(!1);(0,o.useEffect)(()=>{let e=t||i;x.current||(a&&e&&h.has(e)&&a(),x.current=!0)},[a,t,i]);let M=(0,o.useRef)(!1);if((0,o.useEffect)(()=>{if(!M.current){if("afterInteractive"===u)f(e);else"lazyOnload"===u&&("complete"===document.readyState?(0,c.requestIdleCallback)(()=>f(e)):window.addEventListener("load",()=>{(0,c.requestIdleCallback)(()=>f(e))}));M.current=!0}},[e,u]),("beforeInteractive"===u||"worker"===u)&&(g?(m[u]=(m[u]||[]).concat([{id:t,src:i,onLoad:r,onReady:a,onError:d,...y,nonce:b}]),g(m)):_&&_()?h.add(t||i):_&&!_()&&f({...e,nonce:b})),w){if(p&&p.forEach(e=>{n.default.preinit(e,{as:"style"})}),"beforeInteractive"===u)if(!i)return y.dangerouslySetInnerHTML&&(y.children=y.dangerouslySetInnerHTML.__html,delete y.dangerouslySetInnerHTML),(0,s.jsx)("script",{nonce:b,dangerouslySetInnerHTML:{__html:"(self.__next_s=self.__next_s||[]).push("+JSON.stringify([0,{...y,id:t}])+")"}});else return n.default.preload(i,y.integrity?{as:"script",integrity:y.integrity,nonce:b,crossOrigin:y.crossOrigin}:{as:"script",nonce:b,crossOrigin:y.crossOrigin}),(0,s.jsx)("script",{nonce:b,dangerouslySetInnerHTML:{__html:"(self.__next_s=self.__next_s||[]).push("+JSON.stringify([i,{...y,id:t}])+")"}});"afterInteractive"===u&&i&&n.default.preload(i,y.integrity?{as:"script",integrity:y.integrity,nonce:b,crossOrigin:y.crossOrigin}:{as:"script",nonce:b,crossOrigin:y.crossOrigin})}return null}Object.defineProperty(g,"__nextScript",{value:!0});let m=g;("function"==typeof i.default||"object"==typeof i.default&&null!==i.default)&&void 0===i.default.__esModule&&(Object.defineProperty(i.default,"__esModule",{value:!0}),Object.assign(i.default,i),t.exports=i.default)},3484,e=>{"use strict";e.s(["Toaster",()=>r]);var t=e.i(43476),i=e.i(46696);let r=e=>{let{...r}=e;return(0,t.jsx)(i.Toaster,{theme:"dark",className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...r})}},49708,e=>{"use strict";e.s(["default",()=>u],49708);var t=e.i(43476),i=e.i(71645),r=e.i(30374),a=e.i(67881),s=e.i(75254);let n=(0,s.default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),o=(0,s.default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function l(e){let{isOpen:i}=e;return(0,t.jsx)(r.Dialog,{open:i,onOpenChange:()=>{},children:(0,t.jsxs)(r.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsxs)(r.DialogHeader,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(o,{className:"h-5 w-5 text-red-500"}),(0,t.jsx)(r.DialogTitle,{children:"Unauthorized Embedding"})]}),(0,t.jsx)(r.DialogDescription,{className:"text-left",children:"You're viewing DeepSite through an unauthorized iframe. For the best experience and security, please visit the official website directly."})]}),(0,t.jsxs)("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Why visit the official site?"}),(0,t.jsxs)("ul",{className:"text-sm text-muted-foreground space-y-1",children:[(0,t.jsx)("li",{children:"• Better performance and security"}),(0,t.jsx)("li",{children:"• Full functionality access"}),(0,t.jsx)("li",{children:"• Latest features and updates"}),(0,t.jsx)("li",{children:"• Proper authentication support"})]})]}),(0,t.jsx)(r.DialogFooter,{className:"flex-col sm:flex-row gap-2",children:(0,t.jsxs)(a.Button,{onClick:()=>{window.open("https://deepsite.hf.co","_blank")},className:"w-full sm:w-auto",children:[(0,t.jsx)(n,{className:"mr-2 h-4 w-4"}),"Visit Deepsite.hf.co"]})})]})})}function u(){let[e,r]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let e=e=>{let t=e.toLowerCase();return t.endsWith(".huggingface.co")||t.endsWith(".hf.co")||"huggingface.co"===t||"hf.co"===t||"enzostvs-deepsite.hf.space"===t||"deepsite.hf.co"===t};(()=>{if(!(()=>{try{return window.self!==window.top}catch(e){return!0}})()&&!(()=>{try{return window.location!==window.parent.location}catch(e){return!0}})())return!1;try{let t=window.parent.location.hostname;return!e(t)}catch(t){try{if(document.referrer){let t=new URL(document.referrer);return!e(t.hostname)}}catch(e){}return!0}})()&&r(!0)},[]),(0,t.jsx)(l,{isOpen:e,onOpenChange:r})}},22287,e=>{"use strict";e.s(["default",()=>n]);var t=e.i(45042),i=e.i(46696),r=e.i(18566),a=e.i(29632),s=e.i(21731);function n(e){let{children:n,me:o}=e,{loginFromCode:l,user:u,logout:c,loading:d,errCode:h}=(0,a.useUser)(o),f=(0,r.usePathname)(),p=(0,r.useRouter)();(0,t.useMount)(()=>{(null==o?void 0:o.user)||u||([401,403].includes(h)?c():f.includes("/spaces")&&(h&&i.toast.error("An error occured while trying to log in"),p.push("/")))});let y={};return(0,s.useBroadcastChannel)("auth",e=>{!f.includes("/auth/callback")&&e.code&&"user-oauth"===e.type&&(null==e?void 0:e.code)&&!y.code&&l(e.code)}),n}},17855,e=>{"use strict";e.s(["default",()=>W],17855);var t,i,r,a,s,n,o,l,u,c,d,h,f=e.i(43476),p=e.i(39946),y=e.i(70292),g=e.i(62351),m=e.i(26005);function _(e,t){var i=(0,m._)(e,t,"update");if(i.set){if(!i.get)throw TypeError("attempted to read set only private field");return"__destrWrapper"in i||(i.__destrWrapper={set value(v){i.set.call(e,v)},get value(){return i.get.call(e)}}),i.__destrWrapper}if(!i.writable)throw TypeError("attempted to set read only private field");return i}var w=e.i(19273),b=e.i(86491),x=e.i(40143),M=e.i(15823),O=(t=new WeakMap,class extends M.Subscribable{build(e,t,i){var r;let a=t.queryKey,s=null!=(r=t.queryHash)?r:(0,w.hashQueryKeyByOptions)(a,t),n=this.get(s);return n||(n=new b.Query({client:e,queryKey:a,queryHash:s,options:e.defaultQueryOptions(t),state:i,defaultOptions:e.getQueryDefaults(a)}),this.add(n)),n}add(e){(0,p._)(this,t).has(e.queryHash)||((0,p._)(this,t).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){let i=(0,p._)(this,t).get(e.queryHash);i&&(e.destroy(),i===e&&(0,p._)(this,t).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){x.notifyManager.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return(0,p._)(this,t).get(e)}getAll(){return[...(0,p._)(this,t).values()]}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,w.matchQuery)(t,e))}findAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getAll();return Object.keys(e).length>0?t.filter(t=>(0,w.matchQuery)(e,t)):t}notify(e){x.notifyManager.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){x.notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){x.notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}constructor(e={}){super(),(0,y._)(this,t,{writable:!0,value:void 0}),this.config=e,(0,g._)(this,t,new Map)}}),P=e.i(14272),Q=M,j=(i=new WeakMap,r=new WeakMap,a=new WeakMap,class extends Q.Subscribable{build(e,t,i){let r=new P.Mutation({mutationCache:this,mutationId:++_(this,a).value,options:e.defaultMutationOptions(t),state:i});return this.add(r),r}add(e){(0,p._)(this,i).add(e);let t=C(e);if("string"==typeof t){let i=(0,p._)(this,r).get(t);i?i.push(e):(0,p._)(this,r).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if((0,p._)(this,i).delete(e)){let t=C(e);if("string"==typeof t){let i=(0,p._)(this,r).get(t);if(i)if(i.length>1){let t=i.indexOf(e);-1!==t&&i.splice(t,1)}else i[0]===e&&(0,p._)(this,r).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){let t=C(e);if("string"!=typeof t)return!0;{let i=(0,p._)(this,r).get(t),a=null==i?void 0:i.find(e=>"pending"===e.state.status);return!a||a===e}}runNext(e){let t=C(e);if("string"!=typeof t)return Promise.resolve();{var i,a;let s=null==(i=(0,p._)(this,r).get(t))?void 0:i.find(t=>t!==e&&t.state.isPaused);return null!=(a=null==s?void 0:s.continue())?a:Promise.resolve()}}clear(){x.notifyManager.batch(()=>{(0,p._)(this,i).forEach(e=>{this.notify({type:"removed",mutation:e})}),(0,p._)(this,i).clear(),(0,p._)(this,r).clear()})}getAll(){return Array.from((0,p._)(this,i))}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,w.matchMutation)(t,e))}findAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getAll().filter(t=>(0,w.matchMutation)(e,t))}notify(e){x.notifyManager.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){let e=this.getAll().filter(e=>e.state.isPaused);return x.notifyManager.batch(()=>Promise.all(e.map(e=>e.continue().catch(w.noop))))}constructor(e={}){super(),(0,y._)(this,i,{writable:!0,value:void 0}),(0,y._)(this,r,{writable:!0,value:void 0}),(0,y._)(this,a,{writable:!0,value:void 0}),this.config=e,(0,g._)(this,i,new Set),(0,g._)(this,r,new Map),(0,g._)(this,a,0)}});function C(e){var t;return null==(t=e.options.scope)?void 0:t.id}var S=e.i(75555),k=e.i(14448);function D(e){return{onFetch:(t,i)=>{var r,a,s,n,o;let l=t.options,u=null==(s=t.fetchOptions)||null==(a=s.meta)||null==(r=a.fetchMore)?void 0:r.direction,c=(null==(n=t.state.data)?void 0:n.pages)||[],d=(null==(o=t.state.data)?void 0:o.pageParams)||[],h={pages:[],pageParams:[]},f=0,p=async()=>{let i=!1,r=(0,w.ensureQueryFn)(t.options,t.fetchOptions),a=async(e,a,s)=>{if(i)return Promise.reject();if(null==a&&e.pages.length)return Promise.resolve(e);let n=(()=>{let e={client:t.client,queryKey:t.queryKey,pageParam:a,direction:s?"backward":"forward",meta:t.options.meta};return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(t.signal.aborted?i=!0:t.signal.addEventListener("abort",()=>{i=!0}),t.signal)}),e})(),o=await r(n),{maxPages:l}=t.options,u=s?w.addToStart:w.addToEnd;return{pages:u(e.pages,o,l),pageParams:u(e.pageParams,a,l)}};if(u&&c.length){let e="backward"===u,t={pages:c,pageParams:d},i=(e?function(e,t){var i;let{pages:r,pageParams:a}=t;return r.length>0?null==(i=e.getPreviousPageParam)?void 0:i.call(e,r[0],r,a[0],a):void 0}:q)(l,t);h=await a(t,i,e)}else{let t=null!=e?e:c.length;do{var s;let e=0===f?null!=(s=d[0])?s:l.initialPageParam:q(l,h);if(f>0&&null==e)break;h=await a(h,e),f++}while(f<t)}return h};t.options.persister?t.fetchFn=()=>{var e,r;return null==(e=(r=t.options).persister)?void 0:e.call(r,p,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},i)}:t.fetchFn=p}}}function q(e,t){let{pages:i,pageParams:r}=t,a=i.length-1;return i.length>0?e.getNextPageParam(i[a],i,r[a],r):void 0}var E=(s=new WeakMap,n=new WeakMap,o=new WeakMap,l=new WeakMap,u=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,class{mount(){_(this,c).value++,1===(0,p._)(this,c)&&((0,g._)(this,d,S.focusManager.subscribe(async e=>{e&&(await this.resumePausedMutations(),(0,p._)(this,s).onFocus())})),(0,g._)(this,h,k.onlineManager.subscribe(async e=>{e&&(await this.resumePausedMutations(),(0,p._)(this,s).onOnline())})))}unmount(){var e,t;_(this,c).value--,0===(0,p._)(this,c)&&(null==(e=(0,p._)(this,d))||e.call(this),(0,g._)(this,d,void 0),null==(t=(0,p._)(this,h))||t.call(this),(0,g._)(this,h,void 0))}isFetching(e){return(0,p._)(this,s).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return(0,p._)(this,n).findAll({...e,status:"pending"}).length}getQueryData(e){var t;let i=this.defaultQueryOptions({queryKey:e});return null==(t=(0,p._)(this,s).get(i.queryHash))?void 0:t.state.data}ensureQueryData(e){let t=this.defaultQueryOptions(e),i=(0,p._)(this,s).build(this,t),r=i.state.data;return void 0===r?this.fetchQuery(e):(e.revalidateIfStale&&i.isStaleByTime((0,w.resolveStaleTime)(t.staleTime,i))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return(0,p._)(this,s).findAll(e).map(e=>{let{queryKey:t,state:i}=e;return[t,i.data]})}setQueryData(e,t,i){let r=this.defaultQueryOptions({queryKey:e}),a=(0,p._)(this,s).get(r.queryHash),n=null==a?void 0:a.state.data,o=(0,w.functionalUpdate)(t,n);if(void 0!==o)return(0,p._)(this,s).build(this,r).setData(o,{...i,manual:!0})}setQueriesData(e,t,i){return x.notifyManager.batch(()=>(0,p._)(this,s).findAll(e).map(e=>{let{queryKey:r}=e;return[r,this.setQueryData(r,t,i)]}))}getQueryState(e){var t;let i=this.defaultQueryOptions({queryKey:e});return null==(t=(0,p._)(this,s).get(i.queryHash))?void 0:t.state}removeQueries(e){let t=(0,p._)(this,s);x.notifyManager.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){let i=(0,p._)(this,s);return x.notifyManager.batch(()=>(i.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={revert:!0,...t};return Promise.all(x.notifyManager.batch(()=>(0,p._)(this,s).findAll(e).map(e=>e.cancel(i)))).then(w.noop).catch(w.noop)}invalidateQueries(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return x.notifyManager.batch(()=>{var i,r;return((0,p._)(this,s).findAll(e).forEach(e=>{e.invalidate()}),(null==e?void 0:e.refetchType)==="none")?Promise.resolve():this.refetchQueries({...e,type:null!=(r=null!=(i=null==e?void 0:e.refetchType)?i:null==e?void 0:e.type)?r:"active"},t)})}refetchQueries(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={...i,cancelRefetch:null==(t=i.cancelRefetch)||t};return Promise.all(x.notifyManager.batch(()=>(0,p._)(this,s).findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,r);return r.throwOnError||(t=t.catch(w.noop)),"paused"===e.state.fetchStatus?Promise.resolve():t}))).then(w.noop)}fetchQuery(e){let t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);let i=(0,p._)(this,s).build(this,t);return i.isStaleByTime((0,w.resolveStaleTime)(t.staleTime,i))?i.fetch(t):Promise.resolve(i.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(w.noop).catch(w.noop)}fetchInfiniteQuery(e){return e.behavior=D(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(w.noop).catch(w.noop)}ensureInfiniteQueryData(e){return e.behavior=D(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return k.onlineManager.isOnline()?(0,p._)(this,n).resumePausedMutations():Promise.resolve()}getQueryCache(){return(0,p._)(this,s)}getMutationCache(){return(0,p._)(this,n)}getDefaultOptions(){return(0,p._)(this,o)}setDefaultOptions(e){(0,g._)(this,o,e)}setQueryDefaults(e,t){(0,p._)(this,l).set((0,w.hashKey)(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){let t=[...(0,p._)(this,l).values()],i={};return t.forEach(t=>{(0,w.partialMatchKey)(e,t.queryKey)&&Object.assign(i,t.defaultOptions)}),i}setMutationDefaults(e,t){(0,p._)(this,u).set((0,w.hashKey)(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){let t=[...(0,p._)(this,u).values()],i={};return t.forEach(t=>{(0,w.partialMatchKey)(e,t.mutationKey)&&Object.assign(i,t.defaultOptions)}),i}defaultQueryOptions(e){if(e._defaulted)return e;let t={...(0,p._)(this,o).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=(0,w.hashQueryKeyByOptions)(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===w.skipToken&&(t.enabled=!1),t}defaultMutationOptions(e){return(null==e?void 0:e._defaulted)?e:{...(0,p._)(this,o).mutations,...(null==e?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){(0,p._)(this,s).clear(),(0,p._)(this,n).clear()}constructor(e={}){(0,y._)(this,s,{writable:!0,value:void 0}),(0,y._)(this,n,{writable:!0,value:void 0}),(0,y._)(this,o,{writable:!0,value:void 0}),(0,y._)(this,l,{writable:!0,value:void 0}),(0,y._)(this,u,{writable:!0,value:void 0}),(0,y._)(this,c,{writable:!0,value:void 0}),(0,y._)(this,d,{writable:!0,value:void 0}),(0,y._)(this,h,{writable:!0,value:void 0}),(0,g._)(this,s,e.queryCache||new O),(0,g._)(this,n,e.mutationCache||new j),(0,g._)(this,o,e.defaultOptions||{}),(0,g._)(this,l,new Map),(0,g._)(this,u,new Map),(0,g._)(this,c,0)}}),F=e.i(12598);e.i(47167);var T=function(){return null},R=e.i(71645);function W(e){let{children:t}=e,[i]=(0,R.useState)(()=>new E({defaultOptions:{queries:{staleTime:6e4,refetchOnWindowFocus:!1}}}));return(0,f.jsxs)(F.QueryClientProvider,{client:i,children:[t,(0,f.jsx)(T,{initialIsOpen:!1})]})}}]);